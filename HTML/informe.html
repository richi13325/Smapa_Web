<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informe de Fallas - SMAPA</title>
    <link rel="stylesheet" href="/CSS/normalizar.css">
    <link rel="stylesheet" href="/CSS/styles_principal.css">
    <link rel="stylesheet" href="/CSS/styles_informe.css">

</head>
<body>
    <header>
        <div class="header_superior">
            <div class="logo">
                <img src="/images/logo.png" alt="">
                <a class="nav_inicio" href="/HTML/inicio.html">Blue Spring</a>
            </div>
        </div>
        <div class="container_menu">
            <div class="menu">
                <nav>
                    <ul>
                        <li>
                            <a href="/HTML/inicio.html" id="selected"></a>
                        </li>
                        <li><a  class="link" href="" >Trámites y Servicios</a>
                            <ul>
                                <li><a href="/HTML/informe.html">Realizar</a></li>
                                <li><a href="#">Consultar</a></li>
                            </ul>
                        </li>
                        <li>
                            <a class="link" href="#">Historial</a>
                        </li>
                        <li>
                            <a class="link" href="/HTML/Almacen.html">Almacen</a>
                        </li>
                        <li>
                            <a class="link" href="/HTML/personal.html">Personal</a>
                        </li>
                        <li>
                            <a class="link" href="#">Colonias</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>
        <section id="informe" class="container">
            <h2>Informe de Fallas en Tuberías</h2>
            <p>Si detectas fallas en las tuberías de agua, por favor repórtalo completando el siguiente formulario:</p>
            
            <form id="reportForm" class="styled-form">

                <div class="form-group">
                    <label for="nombre">Nombre:</label>
                    <input type="text" id="nombre" name="nombre" placeholder="" required>
                </div>
        
                <div class="form-group">
                    <label for="apellido-paterno">Apellido Paterno:</label>
                    <input type="text" id="apellido-paterno" name="apellido-paterno" placeholder="" required>
                </div>
        
                <div class="form-group">
                    <label for="apellido-materno">Apellido Materno:</label>
                    <input type="text" id="apellido-materno" name="apellido-materno" placeholder="" required>
                </div>

                <div class="form-group">
                    <label for="celular">Número de Celular:</label>
                    <input type="tel" id="celular" name="celular" placeholder="" required>
                </div>

                <div class="form-group">
                    <label for="direccion">Dirección de la Falla:</label>
                    <input type="text" id="direccion" name="direccion" placeholder="" required>
                </div>

                <div class="form-group">
                    <label for="colonia">Colonia:</label>
                    <select id="colonia" name="colonia" required>
                        <option value="">Selecciona una colonia</option>
                        <option value="albania_baja">Albania Baja</option>
                        <option value="albania_alta">Albania Alta</option>
                        <option value="caminera">Caminera</option>
                        <option value="capulines">Capulines</option>
                        <option value="cerro_hueco">Cerro Hueco</option>
                        <option value="colinas_del_sur">Colinas del Sur</option>
                        <option value="el_jobo">El Jobo</option>
                        <option value="el_retiro">El Retiro</option>
                        <option value="el_rosario">El Rosario</option>
                        <option value="el_vergel">El Vergel</option>
                        <option value="emiliano_zapata">Emiliano Zapata</option>
                        <option value="estrella_roja">Estrella Roja</option>
                        <option value="fovisste">Fovisste</option>
                        <option value="francisco_i_madero">Francisco I. Madero</option>
                        <option value="jardines_del_pedregal">Jardines del Pedregal</option>
                        <option value="jardines_de_tuxtla">Jardines de Tuxtla</option>
                        <option value="las_aguilas">Las Águilas</option>
                        <option value="las_arboledas">Las Arboledas</option>
                        <option value="las_granjas">Las Granjas</option>
                        <option value="las_palmas">Las Palmas</option>
                        <option value="los_manguitos">Los Manguitos</option>
                        <option value="los_pajaros">Los Pájaros</option>
                        <option value="los_presidentes">Los Presidentes</option>
                        <option value="moctezuma">Moctezuma</option>
                        <option value="paso_limon">Paso Limón</option>
                        <option value="patria_nueva">Patria Nueva</option>
                        <option value="plan_de_ayala">Plan de Ayala</option>
                        <option value="potinaspak">Potinaspak</option>
                        <option value="san_jose_teran">San José Terán</option>
                        <option value="san_pedro_progresivo">San Pedro Progresivo</option>
                        <option value="san_roque">San Roque</option>
                        <option value="santa_cruz">Santa Cruz</option>
                        <option value="teran">Terán</option>
                        <option value="villahermosa">Villahermosa</option>
                        <option value="xamaipak">Xamaipak</option>
                        <option value="zapata">Zapata</option>
                    </select>
                </div>
                

                <div class="form-group">
                    <label for="codigo-postal">Código Postal:</label>
                    <input type="text" id="codigo-postal" name="codigo-postal" placeholder="" required>
                </div>

                <div class="form-group">
                    <label for="descripcion">Descripción del Problema:</label>
                    <select id="descripcion" name="descripcion" required>
                        <option value="">Selecciona un problema</option>
                        <option value="fuga_agua">Fuga de agua</option>
                        <option value="reparacion_tubo_surtidor">Reparación de tubo surtidor</option>
                        <option value="reparacion_toma_domiciliaria">Reparación de toma domiciliaria</option>
                        <option value="reparacion_valvula">Reparación de válvula</option>
                    </select>
                </div>
                

                <div class="form-group">
                    <label for="email">Correo Electrónico:</label>
                    <input type="email" id="email" name="email" placeholder="" required>
                </div>

                <button type="submit" class="submit-btn">Enviar Reporte</button>
            </form>
        </section>

<!-- Modal para mostrar después del envío -->
<div id="modal" class="modal">
    <div class="modal-content">
        <span id="modal-text"></span>
        <br><br>
        <button class="close-btn" id="close-modal">Cerrar</button>
    </div>
</div>


        <script>
            // Función para obtener el número de reporte actual desde localStorage
            function obtenerNumeroReporte() {
                let numeroReporte = localStorage.getItem('numeroReporte');
                if (numeroReporte === null) {
                    // Si no hay un número almacenado, inicializarlo en 0000
                    numeroReporte = 0;
                } else {
                    // Incrementar el número almacenado
                    numeroReporte = parseInt(numeroReporte, 10) + 1;
                    // Limitar el número a 9999
                    if (numeroReporte > 9999) {
                        numeroReporte = 0; // Reiniciar a 0000 cuando llegue a 1000
                    }
                }
                // Guardar el número actualizado en localStorage
                localStorage.setItem('numeroReporte', numeroReporte);
                return numeroReporte.toString().padStart(4, '0'); // Convertir a string y agregar ceros al inicio
            }
            
            document.getElementById('reportForm').addEventListener('submit', function(event) {
                event.preventDefault(); // Evita que el formulario se envíe de forma tradicional
                
                // Captura los valores del formulario
                const nombre = document.getElementById('nombre').value;
                const apellidoPaterno = document.getElementById('apellido-paterno').value;
                const apellidoMaterno = document.getElementById('apellido-materno').value;
            
                // Obtener el número de reporte incremental
                const numeroIncremental = obtenerNumeroReporte();
            
                // Obtener iniciales del nombre y apellidos
                const iniciales = nombre.charAt(0).toUpperCase() + apellidoPaterno.charAt(0).toUpperCase() + apellidoMaterno.charAt(0).toUpperCase();
            
                // Generar el número de reporte
                const numeroReporte = iniciales + "-" + numeroIncremental;
            
                // Mostrar el número de reporte en el modal
                document.getElementById('modal-text').innerHTML = "Tu reporte ha sido enviado con éxito.<br>No. Reporte: <strong>" + numeroReporte + "</strong>";
            
                // Mostrar el modal
                document.getElementById('modal').style.display = "block";
            });
            
// Código para cerrar el modal y redirigir a inicio.html
document.getElementById('close-modal').addEventListener('click', function() {
    document.getElementById('modal').style.display = "none";
    window.location.href = 'inicio.html'; // Redirecciona a inicio.html
});

            </script>
            
</body>
</html>